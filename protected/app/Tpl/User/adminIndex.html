<extend name="Base/index" />

<block name="body">
    <div class="panel panel-default" style="margin-top: 10px;">
        <div class="my-panel-title">用户列表</div>
    
        <div class="col-xs-12" style="margin-bottom: 10px;">
            <a id="add-user" href="javascript:void(0);">添加用户</a>
        </div>

        <div class="panel-body">
            <table class="table table-bordered table-condensed">
                <tr>
                    <th>uid</th>
                    <th>uname</th>
                    <th>password</th>
                    <th>auth</th>
                    <th>action</th>
                </tr>
            <foreach name="userList" item="user">
                <tr id="tr-user-{$user.uid}">
                    <td>{$user.uid}</td>
                    <td>{$user.uname}</td>
                    <td>{$user.pwd}</td>
                    <td>
                        <foreach name="user['deviceList']" item="device">
                            <span class="set-tag <if condition='$device.auth eq true'>set-tag-checked</if>" data-user-id="{$user.uid}" data-tag-id="{$device.id}">{$device.name}</span>
                        </foreach>
                    </td>
                    <td>
                        <a class="remove-user" href="javascript:void(0);" data-user-id="{$user.uid}">删除</a>
                    </td>
                </tr>
            </foreach>
            </table>
        </div>
    </div>
</block>